<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.AllBlogsDao">

    <select id="findAllBlogsNotCurrentUser" resultType="AllBlogsEntity">
        SELECT
            d.id,d.title,t.name as name,d.recommend,d.published,d.create_time,d.update_time,d.views,u.nickname as BlogUserName
        FROM
            t_detail d
                JOIN
            t_type t
            ON
                d.type_id = t.id
                JOIN
            t_user u
            ON
                d.user_id = u.id
        WHERE
            d.user_id != #{id}
        ORDER BY
            d.update_time DESC
    </select>

    <update id="modifyState" >
        UPDATE
            t_detail
        SET
            published = 0
        WHERE
            id = ${id}
    </update>

</mapper>